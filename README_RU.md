**RU** | [ENG](README.md)

# Обработчик команд MQTT

Скрипт Bash для выполнения команд, полученных через MQTT.

## Конфигурация

Перед запуском скрипта настройте параметры в файле `config.ini`:

~~~
broker="your.mqtt.broker"
port="your-mqtt-broker-port"
topic="device/command"
response_topic="device/response"
client_id="device"
username="your-mqtt-username"
password="your-mqtt-password"
LOG_FILE="mqtt_script.log"
USE_WHITELIST="yes"
~~~

## Использование

1. Убедитесь, что установлены `mosquitto_pub` и `mosquitto_sub`.
2. Настройте `config.ini` с данными вашего MQTT-брокера.
3. Запустите скрипт:

   ~~~
   bash main_script.sh
   ~~~

Скрипт подключается к MQTT-брокеру и прослушивает сообщения на указанной теме. Он обрабатывает сообщения и отправляет ответы обратно на брокер.

## Предупреждения по безопасности

- **Выполнение полученных команд**: При `USE_WHITELIST` = "no" скрипт выполняет любую команду, полученную через MQTT, что является высокорискованным. Используйте это только в контролируемой среде.
- **Белый список команд**: Рекомендуется сохранить `USE_WHITELIST` = "yes" для выполнения только предопределенных команд.

## Риски при `USE_WHITELIST = "no"`

Установка `USE_WHITELIST` в "no" позволяет скрипту выполнять **любые команды**, полученные через MQTT. Это может привести к серьезным последствиям, включая:

1. **Компрометация системы и несанкционированный доступ.**
2. **Потеря или повреждение данных.**
3. **Установка и выполнение вредоносного ПО.**
4. **Исчерпание ресурсов системы (CPU, память, диск).**
5. **Эксплуатация уязвимостей сети.**
6. **Повышение привилегий и получение прав root.**
7. **Манипуляция или удаление системных логов.**
8. **Создание бэкдоров или механизмов сохранения доступа.**

## Логирование

- Все действия регистрируются в файле, указанном в `LOG_FILE`.
- В лог включаются получение сообщений, их обработка и отправленные ответы.

## Лицензия

GNU General Public License v3.0
